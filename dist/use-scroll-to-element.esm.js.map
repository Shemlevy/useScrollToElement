{"version":3,"file":"use-scroll-to-element.esm.js","sources":["../src/index.tsx"],"sourcesContent":["import { nanoid } from 'nanoid'\nimport { useLayoutEffect } from 'react';\n\n/**\n * ScrollToElement can apply just on \"real\" element that is on the DOM - will not work on virtual lists etc.\n * @scroll - promise function once solved will scroll to the element by the id was generated from useScroll.\n * @useScroll - should be placed in the Component element, returning the id to attach to the desired scrolled element.\n *\n * @return   {Object}\n *           object with scroll and useScroll\n *\n * @scroll - promise function once solved will scroll to the element by the id was generated from useScroll.\n * @useScroll - should be placed in the Component element, returning the id to attach to the desired scrolled element.\n *\n * @example\n *    export const {\n *      scroll: scrollToImg,\n *      useScroll: useScrollToImg,\n *    } = new ScrollToElement();\n *\n *    **./components/Main.js**\n *\n *    export const Main = () => {\n *      const id = useScrollToImg()\n *\n *      return\n *          (<>\n *            <div>Hello World</div>\n *            {...lotsOfElements}\n *            <img id={id} src='./image.jpg' />\n *          </>)\n *    }\n *\n *\n *    **./modals/Main.js**\n *\n *    export const Main = () =>\n *      (<button onClick={scrollToImg}>Show Image</button>)\n *\n *\n *\n */\n\nclass Deferred<T> {\n  resolve!: (result: T) => void;\n\n  reject!: (error: any) => void;\n\n  promise = new Promise<T>((resolve, reject) => {\n    this.resolve = resolve;\n    this.reject = reject;\n  });\n}\n\nconst scrollToElementId = (id: string) => {\n  const el = document.getElementById(id);\n  el?.scrollIntoView({\n    behavior: 'smooth',\n    block: 'start',\n    inline: 'nearest',\n  });\n};\n\nexport class ScrollToElement {\n  id = nanoid();\n\n  df = new Deferred();\n\n  scroll = () => {\n    this.df.promise.then(() => {\n      setTimeout(() => scrollToElementId(this.id), 0);\n    });\n  };\n\n  useScroll = () => {\n    useLayoutEffect(() => {\n      this.df.resolve('resolve');\n      return () => {\n        this.df = new Deferred();\n      };\n    }, []);\n    return this.id;\n  };\n}\n\n"],"names":["Deferred","Promise","resolve","reject","scrollToElementId","id","el","document","getElementById","scrollIntoView","behavior","block","inline","ScrollToElement","nanoid","df","promise","then","setTimeout","useLayoutEffect"],"mappings":";;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAwCMA,WAAN;;;AAKE,cAAA,GAAU,IAAIC,OAAJ,CAAe,UAACC,OAAD,EAAUC,MAAV;AACvB,IAAA,KAAI,CAACD,OAAL,GAAeA,OAAf;AACA,IAAA,KAAI,CAACC,MAAL,GAAcA,MAAd;AACD,GAHS,CAAV;AAID;;AAED,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,EAAD;AACxB,MAAMC,EAAE,GAAGC,QAAQ,CAACC,cAAT,CAAwBH,EAAxB,CAAX;AACAC,EAAAA,EAAE,QAAF,YAAAA,EAAE,CAAEG,cAAJ,CAAmB;AACjBC,IAAAA,QAAQ,EAAE,QADO;AAEjBC,IAAAA,KAAK,EAAE,OAFU;AAGjBC,IAAAA,MAAM,EAAE;AAHS,GAAnB;AAKD,CAPD;;IASaC,eAAb,GAAA;;;AACE,SAAA,GAAKC,MAAM,EAAX;AAEA,SAAA,GAAK,IAAId,QAAJ,EAAL;;AAEA,aAAA,GAAS;AACP,IAAA,MAAI,CAACe,EAAL,CAAQC,OAAR,CAAgBC,IAAhB,CAAqB;AACnBC,MAAAA,UAAU,CAAC;AAAA,eAAMd,iBAAiB,CAAC,MAAI,CAACC,EAAN,CAAvB;AAAA,OAAD,EAAmC,CAAnC,CAAV;AACD,KAFD;AAGD,GAJD;;AAMA,gBAAA,GAAY;AACVc,IAAAA,eAAe,CAAC;AACd,MAAA,MAAI,CAACJ,EAAL,CAAQb,OAAR,CAAgB,SAAhB;;AACA,aAAO;AACL,QAAA,MAAI,CAACa,EAAL,GAAU,IAAIf,QAAJ,EAAV;AACD,OAFD;AAGD,KALc,EAKZ,EALY,CAAf;AAMA,WAAO,MAAI,CAACK,EAAZ;AACD,GARD;AASD;;;;"}